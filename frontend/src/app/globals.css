@tailwind base;
@tailwind components;
@tailwind utilities;

/* Импорт наших стилей */
@import url('../../styles/tokens.css');
@import url('../../styles/base.css');
@import url('../../styles/components.css');
@import url('../../styles/motion.css');

/* Токены тем через CSS-переменные: */
:root {
  --bg: #FFFFFF;
  --surface: #FAF8F5;
  --surface-2: #F0ECE7;
  --text: #1C1A19;
  --text-secondary: #58524D;
  --dim: #58524D;
  --line: #D9D3CC;
  --outline: #B8AEA5;

  --sky: #AFCBFF;
  --honey: #E8DCA8;
  --burgundy: #A95056;
  --choco: #6B4B3E;

  --success: #86C8BC;
  --warn: #E1A177;
  --danger: #E57C73;

  --blur-sm: 10px;
  --radius-sm: 6px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --radius-xl: 16px;

  --outline-shadow: 0 1px 0 rgba(0,0,0,.08), 0 0 0 1px var(--outline);
  --card-shadow: 0 2px 8px rgba(0,0,0,.10), 0 0 0 1px var(--outline);

  /* elevation (без градиентов) */
  --elev-0: 0 0 0 1px var(--outline);
  --elev-1: 0 1px 0 rgba(0,0,0,.06), 0 0 0 1px var(--outline);
  --elev-2: 0 2px 6px rgba(0,0,0,.10), 0 0 0 1px var(--outline);
  --elev-3: 0 4px 12px rgba(0,0,0,.14), 0 0 0 1px var(--outline);
  --state-opacity-hover: .06;
  --state-opacity-press: .10;
}

/* Dark */
:root[data-theme="dark"] {
  --bg: #2C2B29;
  --surface: #1F1E1C;
  --surface-2: #3A3634;
  --text: #F5F4F2;
  --dim: #CFCAC5;
  --line: #4A4542;
  --outline: #665E58;

  --outline-shadow: 0 1px 0 rgba(0,0,0,.35), 0 0 0 1px var(--line);
  --card-shadow: 0 2px 8px rgba(0,0,0,.35), 0 0 0 1px var(--outline);

  /* elevation (dark) */
  --elev-1: 0 1px 0 rgba(0,0,0,.35), 0 0 0 1px var(--line);
  --elev-2: 0 2px 8px rgba(0,0,0,.35), 0 0 0 1px var(--outline);
  --elev-3: 0 6px 16px rgba(0,0,0,.45), 0 0 0 1px var(--outline);
}

/* База */
html, body { height: 100%; }
body {
  @apply bg-[var(--bg)] text-[color:var(--text)] font-sans antialiased;
  line-height: 1.45;
}

/* современный микрошум без градиентов */
.bg-noise {
  background-color: var(--bg);
  background-image: url("data:image/svg+xml;utf8,\
  <svg xmlns='http://www.w3.org/2000/svg' width='64' height='64' viewBox='0 0 64 64'>\
  <filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='1' stitchTiles='stitch'/>\
  <feColorMatrix type='saturate' values='0'/><feComponentTransfer>\
  <feFuncA type='table' tableValues='0 0 0 0 .02 .035 .03 0 0 0'/></feComponentTransfer></filter>\
  <rect width='100%' height='100%' filter='url(%23n)' fill='transparent'/></svg>");
  background-size: 256px 256px;
}

/* Утилиты на токенах */
.surface     { background: var(--surface); }
.surface-2   { background: var(--surface-2); }

/* Safe area для мобильных устройств */
.safe-area-top {
  padding-top: env(safe-area-inset-top, 0);
}
.safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom, 0);
}
.border-line { border-color: var(--line); }
.border-outline { border-color: var(--outline); }
.text-dim    { color: var(--dim); }
.outline-shadow { box-shadow: var(--outline-shadow); }
.card-shadow { box-shadow: var(--card-shadow); }

/* Формы */
.round-sm { border-radius: var(--radius-sm); }
.round-md { border-radius: var(--radius-md); }
.round-lg { border-radius: var(--radius-lg); }
.round-xl { border-radius: var(--radius-xl); }

/* Интеракции */
a { color: var(--sky); }

/* Elevation утилиты */
.elev-0{ box-shadow: var(--elev-0) }
.elev-1{ box-shadow: var(--elev-1) }
.elev-2{ box-shadow: var(--elev-2) }
.elev-3{ box-shadow: var(--elev-3) }

/* State-layer для тактильности */
.state-layer {
  position: relative; isolation: isolate;
}
.state-layer::after{
  content:""; position:absolute; inset:0; border-radius: inherit;
  background: currentColor; opacity: 0; pointer-events: none;
  transition: opacity 140ms ease-out;
  mix-blend-mode: normal; /* чистая заливка */
}
.state-layer:hover::after { opacity: var(--state-opacity-hover) }
.state-layer:active::after { opacity: var(--state-opacity-press) }

/* Скелетоны */
.skeleton { 
  position:relative; 
  overflow:hidden; 
  background: var(--surface-2);
  border: 1px solid var(--outline); 
  border-radius: var(--radius-sm); 
  box-shadow: var(--elev-0);
}
.skeleton::after{
  content:""; 
  position:absolute; 
  inset:0; 
  opacity:.12;
}

/* Sidebar стили */
.sidebar-item {
  @apply w-full flex items-center gap-3 px-3 py-2.5 rounded-[var(--radius-md)] transition-all duration-200;
  @apply text-[color:var(--text)] hover:bg-[var(--surface-2)] hover:text-[color:var(--text)];
}

.sidebar-item.active {
  @apply bg-[var(--honey)] text-[#1C1A19] font-medium;
}

.sidebar-item-icon {
  @apply w-5 h-5 flex-shrink-0;
}

/* Скрытие скроллбаров */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* Глобальное скрытие скроллбаров */
* {
  scrollbar-width: none;
  -ms-overflow-style: none;
}

*::-webkit-scrollbar {
  display: none;
}

/* Touch targets */
.touch-target {
  @apply min-h-[44px] min-w-[44px];
}